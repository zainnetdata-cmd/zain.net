<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZAIN.NET Crypto Futures — LONG/SHORT (Client-only, Improved)</title>
<!-- Lightweight Charts -->
<script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
<style>
:root{--bg:#071024;--card:#0f1724;--muted:#9fb0c8;--text:#e6f2ff;--accent:#22c55e;--danger:#ff6b6b}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,Segoe UI,Roboto,Helvetica,Arial}
.wrap{max-width:1200px;margin:14px auto;padding:12px}
header{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
h1{font-size:18px;margin:0}
.controls{display:grid;grid-template-columns:repeat(12,1fr);gap:8px;width:100%}
.c{grid-column:auto/span 3}
@media(max-width:900px){.c{grid-column:auto/span 6}}
@media(max-width:600px){.c{grid-column:auto/span 12}}
input,select,button{width:100%;padding:8px;border-radius:8px;border:1px solid #21324a;background:#071822;color:var(--text)}
button{cursor:pointer}
button.primary{background:linear-gradient(180deg,#0b6b4f,#0a5a42);border:none;color:#e9fff1}
.grid{display:grid;grid-template-columns:1fr 420px;gap:12px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);border-radius:12px;padding:12px;border:1px solid #122033}
#chart{height:360px}
.list{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
@media(max-width:980px){.list{grid-template-columns:1fr}}
.coin{padding:10px;border-radius:10px;border:1px solid #17283a;background:linear-gradient(180deg,#071422,#081826);display:flex;flex-direction:column;gap:8px}
.pill{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px}
.pill.long{background:#063;color:#bfffe0}
.pill.short{background:#600;color:#ffdede}
.pill.neutral{background:#30343a;color:#cbd5e1}
.muted{color:var(--muted);font-size:13px}
.small{font-size:12px;color:#9fb0c8}
.kpi{display:flex;gap:8px;flex-wrap:wrap}
.kpi .box{background:#071826;padding:8px;border-radius:8px;border:1px solid #123045}
.history{max-height:240px;overflow:auto;font-size:13px;white-space:pre-wrap}
.footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}
button.small{padding:6px 8px;font-size:13px}
.warn{color:#ffcf66}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ZAIN.NET Crypto Futures —WA (085231176597)</h1>
      <div class="small muted">Futures USDT-M • EMA/RSI/MACD/BB • Funding rate heuristic • Chart • History • CORS-hardened</div>
    </header>

    <section class="card controls" style="margin-bottom:12px">
      <div class="c"><label>Timeframe<select id="tf"><option>1m</option><option>3m</option><option>5m</option><option>15m</option><option selected>1h</option><option>4h</option><option>1d</option></select></label></div>
      <div class="c"><label>Jumlah candle<input id="limit" type="number" min="50" max="1000" value="300"></label></div>
      <div class="c"><label>Interval (detik)<input id="interval" type="number" min="5" value="60"></label></div>
      <div class="c"><label>Top N USDT<input id="topN" type="number" min="5" max="100" value="30"></label></div>
      <div class="c"><label>Modal (USD)<input id="capital" type="number" value="1000"></label></div>
      <div class="c"><label>Risk (%)<input id="risk" type="number" step="0.1" value="1.0"></label></div>

      <div class="c"><label>Filter<select id="filter"><option value="all">Semua</option><option value="long">LONG</option><option value="short">SHORT</option><option value="neutral">NEUTRAL</option></select></label></div>
      <div class="c"><label>Sort<select id="sort"><option value="volume">Volume</option><option value="change">%Change</option><option value="score">Score</option><option value="symbol">Symbol</option></select></label></div>
      <div class="c"><label>Search<input id="search" placeholder="BTC, ETH..." /></label></div>
      <div class="c"><label>Concurrency<input id="concurrency" type="number" min="1" max="12" value="6"></label></div>

      <div class="c"><button class="primary" id="startBtn">Start Scan</button></div>
      <div class="c"><button id="stopBtn">Stop</button></div>
      <div class="c"><button id="exportCSV">Export CSV</button></div>
      <div class="c"><button id="exportJSON">Export JSON</button></div>
    </section>

    <div class="grid">
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="kpi" id="kpis"></div>
            <div><span class="small muted">Status: </span><span id="status" class="small">Idle</span></div>
          </div>
          <div id="warn" class="small warn" style="margin-top:6px"></div>
          <div id="list" class="list" style="margin-top:12px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>History (localStorage)</h3>
          <div style="display:flex;gap:8px;margin-bottom:8px">
            <button id="clearHistory" class="small">Clear History</button>
            <button id="downloadHistory" class="small">Download JSON</button>
          </div>
          <div id="history" class="history muted"></div>
        </div>
      </div>

      <div>
        <div class="card">
          <h3>Chart</h3>
          <div id="chart"></div>
          <div id="chartInfo" class="small muted" style="margin-top:8px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>Logs</h3>
          <div id="log" class="small muted" style="max-height:160px;overflow:auto"></div>
        </div>
      </div>
    </div>

    <div class="footer">DYOR. (Do Your Own Research) ini hanya analisa otomatis yang bisa saja salah. Analisa manual lagi untuk ke Validasi data.</div>
  </div>

<script>
/* (script Anda sama persis — tidak saya ubah kecuali untuk memperbaiki footer) */
... // (pastekan script Anda yang semula di sini tanpa perubahan)
</script>
</body>
</html>
